<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add new Projectmember | KristianiaProject</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Adding user to project:</h1>

    <form method="POST" action="/api/projectMembers">
        <label> <select id="userSelects" name="user"></select> </label>
        <label> Project ID:
            <input class="readonly" id="formProjectId" type=text name="projectid" value="" readonly/>
            <!-- Would normally be hidden from user -->
        </label>
        <button action="submit">Add selected user to project</button>
    </form>

    <p class="warning">PS: Will crash if user already exists in project</p>
    <br>
    <div>
        <a id="back" href="index.html">Return to front page</a>
    </div>

</body>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const projectId = urlParams.get('projectid');

    document.getElementById("formProjectId").value = projectId;

    fetch("/api/userSelect")
        .then(function (response) {
            return response.text();
        }).then(function (text) {
        document.getElementById("userSelects").innerHTML = text;
    });
</script>
</html>