<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>KristianiaProject</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<h1>Task view</h1>

<h3>Status:</h3>
<p id="status"></p>

<h3>Members of this task:</h3>
<div>
    <ul id="taskMembers"></ul>
</div>
<div>
    <a id="toTask">Add members to task</a>
</div>

<div>
    <a id="back" href="">Back to project</a>
</div>

</body>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const taskId = urlParams.get('taskid');
    const projectId = urlParams.get('projectid');

    document.getElementById("back").setAttribute("href","project.html?projectid=" + projectId);
    document.getElementById("toTask").setAttribute("href", "addMemberToTask.html?projectid="+ projectId +"&taskid=" + taskId);

    fetch("/api/taskMembers?projectid=" + projectId + "&taskid=" + taskId)
        .then(function(response) {
            return response.text();
        }).then(function(text) {
        document.getElementById("taskMembers").innerHTML = text;
    });

    fetch("/api/taskStatus?projectid=" + projectId + "&taskid=" + taskId)
        .then(function (response) {
            return response.text();
        }).then(function (text) {
        document.getElementById("status").innerHTML = text;
    })
</script>
</html>